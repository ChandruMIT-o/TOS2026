# --- STRATEGY 5: THE SNIPER (The Eco-Terrorist) ---
def strat_sniper(free, opp, mine, energy):
    def get_valid_targets(targets):
        # Exclude Home Bases (1 and 14) from potential target lists
        # This fixes the "Target Fixation Bug"
        return [t for t in targets if t not in [1, 14]]
    def get_neighbors(n): return [n-1 if n>1 else 26, n+1 if n<26 else 1]
    
    valid_opp = get_valid_targets(opp)
    
    if valid_opp and energy >= 10:
        isolated_targets = []
        for t in valid_opp:
            neighbors = get_neighbors(t)
            defense = sum(1 for n in neighbors if n in opp)
            if defense == 0 and t not in [4, 7, 11, 17, 20, 24]: isolated_targets.append(t)
        if isolated_targets: return ["CONQUER", isolated_targets[0]]

    opp_power = [n for n in valid_opp if n in [4, 7, 11, 17, 20, 24]]
    if opp_power and energy >= 25: return ["CONQUER", opp_power[0]]

    if free and energy >= 5: return ["EXPAND", free[0]]
        
    return ["HARVEST"]